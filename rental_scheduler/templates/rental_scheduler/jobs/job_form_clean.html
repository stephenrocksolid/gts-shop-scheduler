{% extends "rental_scheduler/layouts/form_base.html" %}
{% load static %}

{% block page_title %}{{ title|default:"Create Job" }}{% endblock %}
{% block page_subtitle %}Fill out the form below to create a new job or event.{% endblock %}

{% block page_actions %}
    {% include "rental_scheduler/components/action_buttons.html" with back_url="rental_scheduler:job_list" %}
{% endblock %}

{% block form_id %}job-form{% endblock %}

{% block form_fields %}
    <!-- Customer Information Section -->
    <div class="space-y-6">
        <div>
            <h3 class="text-lg font-medium text-gray-900 mb-4">Customer Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="{{ form.business_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Business Name *
                    </label>
                    {{ form.business_name }}
                    {% if form.business_name.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.business_name.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.contact_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Contact Name
                    </label>
                    {{ form.contact_name }}
                    {% if form.contact_name.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.contact_name.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Phone
                    </label>
                    {{ form.phone }}
                    {% if form.phone.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.phone.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Trailer Information Section -->
        <div>
            <h3 class="text-lg font-medium text-gray-900 mb-4">Trailer Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="{{ form.trailer_color.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Trailer Color
                    </label>
                    {{ form.trailer_color }}
                    {% if form.trailer_color.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.trailer_color.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.trailer_serial.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Serial Number
                    </label>
                    {{ form.trailer_serial }}
                    {% if form.trailer_serial.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.trailer_serial.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="md:col-span-2">
                    <label for="{{ form.trailer_details.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Trailer Details
                    </label>
                    {{ form.trailer_details }}
                    {% if form.trailer_details.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.trailer_details.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Schedule Information Section -->
        <div>
            <h3 class="text-lg font-medium text-gray-900 mb-4">Schedule Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="{{ form.start_dt.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Start Date & Time *
                    </label>
                    {{ form.start_dt }}
                    {% if form.start_dt.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.start_dt.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.end_dt.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        End Date & Time
                    </label>
                    {{ form.end_dt }}
                    {% if form.end_dt.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.end_dt.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.status.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Status
                    </label>
                    {{ form.status }}
                    {% if form.status.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.status.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div class="flex items-center">
                    <div class="flex items-center h-5">
                        {{ form.all_day }}
                    </div>
                    <div class="ml-3 text-sm">
                        <label for="{{ form.all_day.id_for_label }}" class="font-medium text-gray-700">
                            All Day Event
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div>
            <h3 class="text-lg font-medium text-gray-900 mb-4">Notes</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="{{ form.notes.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        General Notes
                    </label>
                    {{ form.notes }}
                    {% if form.notes.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.notes.errors.0 }}</p>
                    {% endif %}
                </div>
                
                <div>
                    <label for="{{ form.repair_notes.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                        Repair Notes
                    </label>
                    {{ form.repair_notes }}
                    {% if form.repair_notes.errors %}
                        <p class="mt-1 text-sm text-red-600">{{ form.repair_notes.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block cancel_url %}{% url 'rental_scheduler:job_list' %}{% endblock %}
{% block submit_text %}{% if job %}Update Job{% else %}Create Job{% endif %}{% endblock %}
