{# Series header row for standard (no-search) Jobs list #}
{# This row represents a recurring series, clicking expands to show occurrences #}
<tr class="series-header-row hover:bg-indigo-50 cursor-pointer border-l-4 border-indigo-500 bg-indigo-50/30 transition-opacity duration-200"
    id="series-row-{{ series.parent_id }}-{{ series.scope }}"
    data-series-id="{{ series.parent_id }}"
    data-scope="{{ series.scope }}"
    data-expanded="false"
    aria-expanded="false"
    aria-label="Expand recurring series: {{ series.display_name }}"
    role="button"
    tabindex="0">
    {# Column 1: Customer name with expand controls #}
    <td class="px-6 py-4 whitespace-nowrap text-center">
        <div class="flex items-center justify-center gap-2">
            {# Expand arrow icon - rotates when expanded #}
            <svg class="w-4 h-4 text-indigo-500 expand-icon transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
            {# Loading spinner - hidden by default, shown during fetch #}
            <svg class="w-4 h-4 text-indigo-500 loading-spinner hidden animate-spin" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <div>
                <div class="text-sm font-medium text-gray-900">{{ series.display_name }}</div>
                {% if series.phone %}
                    <div class="text-sm text-gray-500">{{ series.phone }}</div>
                {% endif %}
            </div>
        </div>
    </td>
    {# Column 2: Calendar badge #}
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
              style="background-color: {{ series.calendar_color }}20; color: {{ series.calendar_color }};">
            {{ series.calendar_name }}
        </span>
    </td>
    {# Column 3: Status - show "Recurring" indicator #}
    <td class="px-6 py-4 whitespace-nowrap text-center">
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700">
            Recurring Series
        </span>
    </td>
    {# Column 4: Start Date (representative - first occurrence's date) #}
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
        {{ series.representative_start_dt|date:"M j, Y" }}
        {% if series.parent and not series.parent.all_day %}
            <br><span class="text-gray-500">{{ series.representative_start_dt|time:"g:i A" }}</span>
        {% endif %}
    </td>
    {# Column 5: End Date (representative) #}
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
        {{ series.representative_end_dt|date:"M j, Y" }}
        {% if series.parent and not series.parent.all_day %}
            <br><span class="text-gray-500">{{ series.representative_end_dt|time:"g:i A" }}</span>
        {% endif %}
    </td>
    {# Column 6: Repeat type badge #}
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center">
        <div class="flex flex-col items-center gap-1">
            {% if series.is_forever %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800" title="Forever recurring series">
                    ∞ {{ series.recurrence_type|default:"Recurring"|capfirst }}
                </span>
            {% else %}
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    {{ series.recurrence_type|default:"Recurring"|capfirst }}
                </span>
            {% endif %}
            <span class="expand-label text-indigo-600 text-xs font-medium">Show {{ series.scope }}</span>
        </div>
    </td>
    {# Column 7: Actions - no direct actions on header #}
    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-center">
        <span class="text-gray-400 text-xs">—</span>
    </td>
</tr>

