{% load static %}
{% load calculation_tags %}

{% if available_trailers %}
<div class="space-y-2">
    {% for trailer in available_trailers %}
    <a href="{% url 'rental_scheduler:contract_create' %}?category={{ category_id }}&trailer={{ trailer.id }}&start={{ start_datetime|date:'Y-m-d H:i:s' }}&end={{ end_datetime|date:'Y-m-d H:i:s' }}&next={% url 'rental_scheduler:availability' %}" class="block bg-white rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all duration-200 cursor-pointer">
        <div class="p-4">
            <div class="flex justify-between items-center">
                <div class="flex-1">
                    <div class="mb-1">
                        <h4 class="text-base font-semibold text-gray-900">Trailer {{ trailer.number }}</h4>
                    </div>
                    <div class="text-sm text-gray-600">
                        <span><strong>Model:</strong> {{ trailer.model }}</span>
                        {% if trailer.size %}
                        <span class="ml-4"><strong>Size:</strong> {{ trailer.size }}</span>
                        {% endif %}
                        {% if trailer.hauling_capacity %}
                        <span class="ml-4"><strong>Capacity:</strong> {{ trailer.hauling_capacity|floatformat:0 }} lbs</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Compact Pricing Summary -->
                <div class="text-right">
                    <div class="space-y-0.5">
                        <div class="flex items-center text-sm">
                            <span class="text-gray-600 mr-2">{% format_rate_label rate_category has_half_day trailer.half_day_rate %}:</span>
                            <span class="font-medium">${{ trailer.unit_rate|floatformat:2 }}</span>
                        </div>
                        <div class="flex items-center text-xs text-gray-500">
                            <span class="mr-2">Tax:</span>
                            <span>${{ trailer.tax_amount|floatformat:2 }}</span>
                        </div>
                        <div class="border-t border-gray-200 pt-1">
                            <div class="flex items-center">
                                <span class="text-sm font-semibold text-gray-900 mr-2">Total:</span>
                                <span class="text-base font-bold text-indigo-600">${{ trailer.total|floatformat:2 }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-12">
    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
    <h3 class="mt-4 text-lg font-medium text-gray-900">No Available Trailers</h3>
    <p class="mt-2 text-sm text-gray-500">
        There are no trailers available in this category for the selected time period.
    </p>
</div>
{% endif %}