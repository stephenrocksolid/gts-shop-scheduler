{% load static %}

<div class="filter-chips-container">
    {% if filters %}
    <div class="filter-chips">
        {% for filter in filters %}
        <div class="filter-chip" x-data="{ active: {{ filter.active|yesno:'true,false' }} }">
            <button @click="active = !active; $dispatch('filter-changed', { filter: '{{ filter.key }}', active: active })"
                    :class="active ? 'filter-chip-active' : 'filter-chip-inactive'"
                    class="filter-chip-button"
                    hx-get="{{ filter.url }}"
                    hx-target="#filtered-content"
                    hx-push-url="false">
                {% if filter.icon %}
                <svg class="filter-chip-icon" fill="currentColor" viewBox="0 0 20 20">
                    {{ filter.icon|safe }}
                </svg>
                {% endif %}
                <span class="filter-chip-label">{{ filter.label }}</span>
                {% if filter.count %}
                <span class="filter-chip-count">{{ filter.count }}</span>
                {% endif %}
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if show_clear_filters %}
    <div class="filter-actions">
        <button class="clear-filters-button"
                hx-get="{{ clear_filters_url }}"
                hx-target="#filtered-content"
                hx-push-url="false">
            Clear Filters
        </button>
    </div>
    {% endif %}
</div>

<style>
.filter-chips-container {
    @apply flex flex-wrap items-center gap-2 mb-4;
}

.filter-chips {
    @apply flex flex-wrap gap-2;
}

.filter-chip {
    @apply inline-flex;
}

.filter-chip-button {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
}

.filter-chip-inactive {
    @apply bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500;
}

.filter-chip-active {
    @apply bg-red-100 text-red-700 hover:bg-red-200 focus:ring-red-500;
}

.filter-chip-icon {
    @apply w-4 h-4 mr-1.5;
}

.filter-chip-label {
    @apply mr-1;
}

.filter-chip-count {
    @apply bg-white bg-opacity-75 px-1.5 py-0.5 rounded-full text-xs font-medium;
}

.filter-actions {
    @apply ml-auto;
}

.clear-filters-button {
    @apply text-sm text-gray-500 hover:text-gray-700 focus:outline-none focus:text-gray-700;
}
</style>


