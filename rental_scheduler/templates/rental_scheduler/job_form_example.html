{% extends "base.html" %}
{% load static %}

{% block title %}Job Form Components Example{% endblock %}

{% block extra_css %}
<link href="{% static 'rental_scheduler/css/components.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Page Header -->
{% include "rental_scheduler/components/page_header.html" with 
    page_title="Job Form Components" 
    page_subtitle="Demonstration of job form templates and components"
    page_icon="<path fill-rule='evenodd' d='M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z' clip-rule='evenodd'/>"
    page_actions=True %}

{% block page_actions %}
    {% include "rental_scheduler/components/button.html" with 
        text="View Job Form" 
        variant="primary" 
        size="md"
        onclick="window.location.href='{% url 'rental_scheduler:job_create' %}'" %}
{% endblock %}

<!-- Form Field Examples -->
<div class="mb-8">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Form Field Components</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Text Input Example -->
        <div class="form-field-group">
            {% include "rental_scheduler/components/form_field.html" with 
                field=example_form.business_name %}
        </div>

        <!-- Select Input Example -->
        <div class="form-field-group">
            {% include "rental_scheduler/components/form_field.html" with 
                field=example_form.status %}
        </div>

        <!-- Date Input Example -->
        <div class="form-field-group">
            {% include "rental_scheduler/components/form_field.html" with 
                field=example_form.start_dt %}
        </div>

        <!-- Textarea Example -->
        <div class="form-field-group">
            {% include "rental_scheduler/components/form_field.html" with 
                field=example_form.repair_notes %}
        </div>
    </div>
</div>

<!-- Step Navigation Example -->
<div class="mb-8">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Step Navigation</h3>
    <div class="step-navigation-example" x-data="{ currentStep: 1 }">
        <div class="step-navigation">
            <button type="button" 
                    class="step-nav-btn" 
                    :class="{ 'active': currentStep === 1 }"
                    @click="currentStep = 1">
                <span class="step-number">1</span>
                <span class="step-label">Scheduling</span>
            </button>
            <button type="button" 
                    class="step-nav-btn" 
                    :class="{ 'active': currentStep === 2 }"
                    @click="currentStep = 2">
                <span class="step-number">2</span>
                <span class="step-label">Customer & Trailer</span>
            </button>
            <button type="button" 
                    class="step-nav-btn" 
                    :class="{ 'active': currentStep === 3 }"
                    @click="currentStep = 3">
                <span class="step-number">3</span>
                <span class="step-label">Contact Info</span>
            </button>
            <button type="button" 
                    class="step-nav-btn" 
                    :class="{ 'active': currentStep === 4 }"
                    @click="currentStep = 4">
                <span class="step-number">4</span>
                <span class="step-label">Job Details</span>
            </button>
        </div>

        <!-- Step Content -->
        <div class="step-content mt-6">
            <div class="form-step" x-show="currentStep === 1">
                <div class="step-header">
                    <h2 class="step-title">Scheduling Information</h2>
                    <p class="step-description">Set the calendar, status, and timing for this job</p>
                </div>
                <div class="form-grid">
                    <div class="form-field-group">
                        <label class="form-label">Calendar *</label>
                        <select class="form-input">
                            <option>Main Calendar</option>
                            <option>Service Calendar</option>
                            <option>Delivery Calendar</option>
                        </select>
                    </div>
                    <div class="form-field-group">
                        <label class="form-label">Status *</label>
                        <select class="form-input">
                            <option>Scheduled</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                            <option>Canceled</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-step" x-show="currentStep === 2">
                <div class="step-header">
                    <h2 class="step-title">Customer & Trailer Selection</h2>
                    <p class="step-description">Select the customer and trailer for this job</p>
                </div>
                <div class="form-grid">
                    <div class="form-field-group">
                        <label class="form-label">Customer *</label>
                        <select class="form-input">
                            <option>John Doe Company</option>
                            <option>Jane Smith Enterprises</option>
                            <option>Bob Johnson Services</option>
                        </select>
                    </div>
                    <div class="form-field-group">
                        <label class="form-label">Trailer *</label>
                        <select class="form-input">
                            <option>Trailer #001 - Flatbed</option>
                            <option>Trailer #002 - Enclosed</option>
                            <option>Trailer #003 - Utility</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-step" x-show="currentStep === 3">
                <div class="step-header">
                    <h2 class="step-title">Contact Information Override</h2>
                    <p class="step-description">Override customer contact information if needed</p>
                </div>
                <div class="form-grid">
                    <div class="form-field-group">
                        <label class="form-label">Business Name</label>
                        <input type="text" class="form-input" placeholder="Enter business name">
                    </div>
                    <div class="form-field-group">
                        <label class="form-label">Contact Name</label>
                        <input type="text" class="form-input" placeholder="Enter contact name">
                    </div>
                </div>
            </div>

            <div class="form-step" x-show="currentStep === 4">
                <div class="step-header">
                    <h2 class="step-title">Job Details & Settings</h2>
                    <p class="step-description">Enter job-specific information and repeat settings</p>
                </div>
                <div class="form-grid">
                    <div class="form-field-group">
                        <label class="form-label">Repair Notes</label>
                        <textarea class="form-input" rows="4" placeholder="Enter repair notes..."></textarea>
                    </div>
                    <div class="form-field-group">
                        <label class="form-label">Quote Text</label>
                        <textarea class="form-input" rows="4" placeholder="Enter quote text..."></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step Actions -->
        <div class="step-actions">
            <button type="button" 
                    class="btn btn-outline"
                    x-show="currentStep > 1"
                    @click="currentStep--">
                Previous
            </button>
            <button type="button" 
                    class="btn btn-primary"
                    x-show="currentStep < 4"
                    @click="currentStep++">
                Next
            </button>
            <button type="button" 
                    class="btn btn-success"
                    x-show="currentStep === 4">
                Save Job
            </button>
        </div>
    </div>
</div>

<!-- Job Detail Examples -->
<div class="mb-8">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Job Detail Components</h3>
    
    <!-- Status Header Example -->
    <div class="job-status-header mb-6">
        <div class="status-badges">
            {% include "rental_scheduler/components/status_pill.html" with status="Scheduled" %}
            {% include "rental_scheduler/components/status_pill.html" with status="Overdue" %}
        </div>
        
        <div class="job-meta">
            <span class="meta-item">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                </svg>
                December 15, 2024 at 9:00 AM
            </span>
            
            <span class="meta-item">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"/>
                </svg>
                John Doe Company
            </span>
            
            <span class="meta-item">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                Trailer #001 - Flatbed
            </span>
        </div>
    </div>

    <!-- Tab Navigation Example -->
    <div class="tab-navigation-example" x-data="{ activeTab: 'overview' }">
        <nav class="tab-nav">
            <button class="tab-nav-btn" 
                    :class="{ 'active': activeTab === 'overview' }"
                    @click="activeTab = 'overview'">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                </svg>
                Overview
            </button>
            <button class="tab-nav-btn" 
                    :class="{ 'active': activeTab === 'details' }"
                    @click="activeTab = 'details'">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                </svg>
                Details
            </button>
            <button class="tab-nav-btn" 
                    :class="{ 'active': activeTab === 'history' }"
                    @click="activeTab = 'history'">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                </svg>
                History
            </button>
        </nav>

        <!-- Tab Content -->
        <div class="tab-content mt-6">
            <div class="tab-panel" x-show="activeTab === 'overview'">
                <div class="overview-grid">
                    <div class="overview-column">
                        {% include "rental_scheduler/components/card.html" with 
                            card_title="Scheduling Information"
                            card_icon="<path fill-rule='evenodd' d='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z' clip-rule='evenodd'/>" %}
                        
                        {% block card_content %}
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Calendar:</span>
                                <span class="info-value">
                                    <div class="calendar-badge" style="background-color: #3B82F620; color: #3B82F6;">
                                        Main Calendar
                                    </div>
                                </span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Start Date & Time:</span>
                                <span class="info-value">December 15, 2024 at 9:00 AM</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">End Date & Time:</span>
                                <span class="info-value">December 15, 2024 at 5:00 PM</span>
                            </div>
                        </div>
                        {% endblock %}
                    </div>

                    <div class="overview-column">
                        {% include "rental_scheduler/components/card.html" with 
                            card_title="Customer Information"
                            card_icon="<path fill-rule='evenodd' d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z' clip-rule='evenodd'/>" %}
                        
                        {% block card_content %}
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Customer:</span>
                                <span class="info-value">John Doe Company</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Contact:</span>
                                <span class="info-value">John Doe</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Phone:</span>
                                <span class="info-value">(555) 123-4567</span>
                            </div>
                        </div>
                        {% endblock %}
                    </div>
                </div>
            </div>

            <div class="tab-panel" x-show="activeTab === 'details'">
                {% include "rental_scheduler/components/card.html" with 
                    card_title="Detailed Information"
                    card_icon="<path fill-rule='evenodd' d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z' clip-rule='evenodd'/>" %}
                
                {% block card_content %}
                <div class="details-grid">
                    <div class="detail-section">
                        <h3 class="section-title">Contact Override</h3>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Business Name:</span>
                                <span class="info-value">John Doe Company</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Contact Name:</span>
                                <span class="info-value">John Doe</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h3 class="section-title">Address Override</h3>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Address:</span>
                                <span class="info-value">123 Main Street</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">City/State/Zip:</span>
                                <span class="info-value">Anytown, CA 90210</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endblock %}
            </div>

            <div class="tab-panel" x-show="activeTab === 'history'">
                {% include "rental_scheduler/components/card.html" with 
                    card_title="Job History"
                    card_icon="<path fill-rule='evenodd' d='M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z' clip-rule='evenodd'/>" %}
                
                {% block card_content %}
                <div class="history-timeline">
                    <div class="timeline-item">
                        <div class="timeline-marker bg-blue-500"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">December 10, 2024 at 2:30 PM</div>
                            <div class="timeline-title">Job Created</div>
                            <div class="timeline-subtitle">by John Admin</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-marker bg-green-500"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">December 12, 2024 at 10:15 AM</div>
                            <div class="timeline-title">Job Updated</div>
                            <div class="timeline-subtitle">by Jane Manager</div>
                        </div>
                    </div>
                </div>
                {% endblock %}
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions Example -->
<div class="mb-8">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Quick Actions</h3>
    {% include "rental_scheduler/components/button.html" with 
        text="Open Quick Actions" 
        variant="primary" 
        size="md"
        onclick="openQuickActionsExample()" %}
</div>

<!-- Quick Actions Modal Example -->
<div id="quick-actions-example" x-data="quickActionsModal()">
    {% include "rental_scheduler/components/modal.html" with 
        modal_title="Quick Actions Example" 
        show_footer=True %}

    {% block modal_content %}
    <div class="quick-actions-content">
        <div class="job-info mb-4">
            <h4 class="text-lg font-medium text-gray-900 mb-2">Trailer Delivery</h4>
            <p class="text-sm text-gray-600">John Doe Company • 9:00 AM</p>
        </div>
        
        <div class="status-actions mb-4">
            <h5 class="text-sm font-medium text-gray-700 mb-2">Update Status</h5>
            <div class="grid grid-cols-2 gap-2">
                <button class="status-action-btn">
                    {% include "rental_scheduler/components/status_pill.html" with status="Scheduled" %}
                </button>
                <button class="status-action-btn">
                    {% include "rental_scheduler/components/status_pill.html" with status="In Progress" %}
                </button>
                <button class="status-action-btn">
                    {% include "rental_scheduler/components/status_pill.html" with status="Completed" %}
                </button>
                <button class="status-action-btn">
                    {% include "rental_scheduler/components/status_pill.html" with status="Canceled" %}
                </button>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn edit-btn">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                </svg>
                Edit Job
            </button>
            <button class="action-btn view-btn">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                </svg>
                View Details
            </button>
        </div>
    </div>
    {% endblock %}

    {% block modal_footer %}
    {% include "rental_scheduler/components/button.html" with 
        text="Close" 
        variant="outline" 
        size="md"
        onclick="closeQuickActionsExample()" %}
    {% endblock %}
</div>

<script>
// Example form data
document.addEventListener('DOMContentLoaded', function() {
    // Example form fields for demonstration
    window.exampleForm = {
        business_name: { 
            id_for_label: 'id_business_name',
            label: 'Business Name',
            field: { required: false },
            errors: [],
            help_text: 'Enter the business name'
        },
        status: { 
            id_for_label: 'id_status',
            label: 'Status',
            field: { required: true },
            errors: [],
            help_text: 'Select the job status'
        },
        start_dt: { 
            id_for_label: 'id_start_dt',
            label: 'Start Date & Time',
            field: { required: true },
            errors: [],
            help_text: 'Select start date and time'
        },
        repair_notes: { 
            id_for_label: 'id_repair_notes',
            label: 'Repair Notes',
            field: { required: false },
            errors: [],
            help_text: 'Enter repair notes'
        }
    };
});

// Quick Actions Modal functions
function openQuickActionsExample() {
    document.getElementById('quick-actions-example').__x.$data.open({
        id: 1,
        title: 'Trailer Delivery',
        customer: 'John Doe Company'
    });
}

function closeQuickActionsExample() {
    document.getElementById('quick-actions-example').__x.$data.close();
}
</script>

<style>
/* Example-specific styles */
.step-navigation-example {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
}

.tab-navigation-example {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
}

/* Button styles for step actions */
.btn {
    @apply px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200;
}

.btn-outline {
    @apply text-gray-700 bg-white border border-gray-300 hover:bg-gray-50;
}

.btn-primary {
    @apply text-white bg-red-600 hover:bg-red-700;
}

.btn-success {
    @apply text-white bg-green-600 hover:bg-green-700;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .step-navigation {
        @apply flex-col space-y-2;
    }
    
    .step-nav-btn {
        @apply flex-row justify-start space-x-3;
    }
    
    .tab-nav {
        @apply flex-col space-y-1;
    }
    
    .tab-nav-btn {
        @apply justify-start;
    }
    
    .overview-grid {
        @apply grid-cols-1;
    }
    
    .details-grid {
        @apply grid-cols-1;
    }
}
</style>
{% endblock %}


